<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Risk Assessment (PD Model)</title>
    <style>
        /* Global Styles (Same as before) */
        body { font-family: -apple-system, BlinkMacMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f4f6f9; color: #333; margin: 0; padding: 40px; }
        .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1 { color: #004d99; text-align: center; margin-bottom: 30px; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #555; }
        input[type="number"], input[type="text"], select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 16px; transition: border-color 0.3s; }
        input[type="number"]:focus, input[type="text"]:focus, select:focus { border-color: #007bff; outline: none; }
        input[type="submit"] { background-color: #007bff; color: white; padding: 12px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 18px; font-weight: 700; width: 100%; transition: background-color 0.3s ease; }
        input[type="submit"]:hover { background-color: #0056b3; }
        .result-box { margin-top: 40px; padding: 20px; border-radius: 8px; text-align: center; }
        .result-box h3 { margin-top: 0; font-size: 24px; }
        .result-box.approve { background-color: #e6ffe6; border: 2px solid #00b300; color: #006600; }
        .result-box.reject { background-color: #ffe6e6; border: 2px solid #ff0000; color: #cc0000; }
        .two-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Loan Applicant Risk Assessment üè¶</h1>
        <form action="{{ url_for('predict_datapoint') }}" method="post">
            
            <div class="two-columns">
                <div>
                    <div class="form-group">
                        <label for="age">Age (in years):</label>
                        <input type="number" id="age" name="age" required min="18">
                    </div>

                    <div class="form-group">
                        <label for="income">Annual Income:</label>
                        <input type="number" id="income" name="income" required min="1000">
                    </div>

                    <div class="form-group">
                        <label for="emp_length">Employment Length (Years):</label>
                        <input type="number" id="emp_length" name="emp_length" required min="0" step="0.5">
                    </div>

                    <div class="form-group">
                        <label for="ownership">Home Ownership:</label>
                        <select id="ownership" name="ownership" required>
                            <option value="" disabled selected>Select Ownership</option>
                            <option value="MORTGAGE">Mortgage</option>
                            <option value="RENT">Rent</option>
                            <option value="OWN">Own</option>
                            <option value="OTHER">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="intent">Loan Intent:</label>
                        <select id="intent" name="intent" required>
                            <option value="" disabled selected>Select Intent</option>
                            <option value="EDUCATION">Education</option>
                            <option value="MEDICAL">Medical</option>
                            <option value="DEBTCONSOLIDATION">Debt Consolidation</option>
                            <option value="PERSONAL">Personal</option>
                            <option value="VENTURE">Venture</option>
                            <option value="HOMEIMPROVEMENT">Home Improvement</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="grade">Loan Grade:</label>
                        <select id="grade" name="grade" required>
                            <option value="" disabled selected>Select Grade</option>
                            <option value="A">Grade A (Lowest Risk)</option>
                            <option value="B">Grade B</option>
                            <option value="C">Grade C</option>
                            <option value="D">Grade D</option>
                            <option value="E">Grade E</option>
                            <option value="F">Grade F</option>
                            <option value="G">Grade G (Highest Risk)</option>
                        </select>
                    </div>
                </div>

                <div>
                    <div class="form-group">
                        <label for="loan_amount">Loan Amount:</label>
                        <input type="number" id="loan_amount" name="loan_amount" required min="500">
                    </div>

                    <div class="form-group">
                        <label for="int_rate">Interest Rate (%):</label>
                        <input type="number" id="int_rate" name="int_rate" required min="5" max="25" step="0.01">
                    </div>

                    <div class="form-group">
                        <label for="percent_income">Loan % of Income (0.0 to 1.0):</label>
                        <input type="number" id="percent_income" name="percent_income" required min="0" max="1" step="0.01">
                    </div>

                    <div class="form-group">
                        <label for="default_on_file">Default on File:</label>
                        <select id="default_on_file" name="default_on_file" required>
                            <option value="" disabled selected>Select Status</option>
                            <option value="Y">Yes (History of Default)</option>
                            <option value="N">No</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="cred_hist_length">Credit History Length (Years):</label>
                        <input type="number" id="cred_hist_length" name="cred_hist_length" required min="2">
                    </div>
                </div>
            </div>

            <input type="submit" value="Assess Risk">
        </form>

        {% if results %}
            {% set result_class = 'approve' if 'APPROVE' in results else 'reject' %}
            <div class="result-box {{ result_class }}">
                <h3>Assessment Outcome:</h3>
                <p style="font-size: 1.1em; font-weight: bold;">{{ results }}</p>
                <p style="font-size: 0.9em; margin-top: 10px;">{{ prediction_status }}</p>
            </div>
        {% endif %}
    </div>
</body>
</html>